<?xml version="1.0" encoding="utf-8"?>
<modification>
    <name>Custom Modification for admin/controller/catalog/product.php</name>
    <code>custom_mod_product</code>
    <version>1.0</version>
    <author>Your Name</author>
    <link>Your Website or Contact Info</link>


    <file path="admin/controller/catalog/product.php">


        <operation>
            <search><![CDATA[$this->load->language('catalog/product'); ]]></search>


            <add position="after"><![CDATA[

        //opc_gemini
               $this->document->addStyle('view/javascript/loading/loading.css');
               $this->document->addScript('view/javascript/loading/jquery.loading.min.js');


				]]></add>
        </operation>



    </file>



    <file path="admin/view/template/catalog/product_form.twig">
        <operation>
            <search><![CDATA[<script type="text/javascript" src="view/javascript/summernote/opencart.js"></script>]]></search>
            <add position="after"><![CDATA[



         <script type="text/javascript">


        function loadGemini(languageID, languageName, objectName, description) {
            var product_name = $('#input-name' + languageID);
            var trimObject = $("#" + objectName + languageID);
            $(trimObject).parent('div').loading();
            $.ajax({
                url: 'index.php?route=extension/module/opc_gemini/getData&user_token={{ user_token }}',
                type: 'post',
                data: {gemini_content: $(product_name).val() + description},
                dataType: 'json',
                success: function (json) {
                $(trimObject).parent('div').loading('stop');
                    let jsonVal = json.candidates[0].content.parts[0].text;

                    if (objectName === "input-description") {
                        $(trimObject).summernote('code', jsonVal);
                    } else {
                        $(trimObject).val(jsonVal);
                    }
                },
                error: function (request, error) {
                    console.log("Request: " + JSON.stringify(request));
                      $(trimObject).parent('div').loading('stop');
                }
            });
        }


        $(document).ready(function () {


            {% for language in languages %}

            $('#input-name{{ language.language_id }}').parent('div').append($('<button/>')
                .attr('type', 'button')
                .text('i')
                .addClass('btn btn-primary btn-sm')
                .click(function () {
                    loadGemini({{ language.language_id }},"{{ language.name }}","input-description", "  وصف بسيط  منسق html body  ");
                }));


            $('#input-meta-title{{ language.language_id }}').parent('div').append($('<button/>')
                .attr('type', 'button')
                .text('i')
                .addClass('btn btn-primary btn-sm')
                .click(function () {
                    loadGemini({{ language.language_id }}, "{{ language.name }}", "input-meta-title", "كلمات مفتاحية مفصولة كل كلمة - ");
                }));

            $('#input-meta-description{{ language.language_id }}').parent('div').append($('<button/>')
                .attr('type', 'button')
                .text('i')
                .addClass('btn btn-primary btn-sm')
                .click(function () {
                    loadGemini({{ language.language_id }}, "{{ language.name }}", "input-meta-description", "   وصف ميتا تاج بسيط  ");
                }));


            $('#input-meta-keyword{{ language.language_id }}').parent('div').append($('<button/>')
                .attr('type', 'button')
                .text('i')
                .addClass('btn btn-primary btn-sm')
                .click(function () {
                    loadGemini({{ language.language_id }}, "{{ language.name }}", "input-meta-keyword", "  meta keyword  ");
                }));


            $('#input-tag{{ language.language_id }}').parent('div').append($('<button/>')
                .attr('type', 'button')
                .text('i')
                .addClass('btn btn-primary btn-sm')
                .click(function () {
                    loadGemini({{ language.language_id }}, "{{ language.name }}","input-tag"," كلمات مفتاحية مفصولة كل كلمة بفاصلة  ");
                }));


            console.log("{{ language.name }}", "XXX")
            {% endfor %}

        })


    </script>


            ]]></add>
        </operation>

    </file>

</modification>
